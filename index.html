<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self'; worker-src 'self'; style-src 'self' https://cdn.jsdelivr.net https://fonts.googleapis.com; font-src 'self' https://cdn.jsdelivr.net https://fonts.gstatic.com; connect-src 'self'; img-src 'self' data:;">
    <title>PM Certification Quiz - Free Practice</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" integrity="sha384-XGjxtQfXaH2tnPFa9x+ruJTuLE3Aa6LhHSWRr1XeTyhezb4abCG4ccI5AkVDxqC+" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="app.js" as="script">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="theme.js"></script>
    <link rel="stylesheet" href="style.css">
    <meta name="description" content="Free project management certification exam practice with quizzes covering all 8 performance domains. Study offline with timed questions and detailed explanations.">
    <link rel="manifest" href="./manifest.webmanifest">
    <meta name="theme-color" content="#f8f9fa">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="PM Quiz">

    <!-- Social Sharing Metadata -->
    <meta property="og:title" content="PM Certification Quiz - Free Practice">
    <meta property="og:description" content="Free project management certification exam practice with quizzes covering all 8 performance domains. Study offline with timed questions.">
    <meta property="og:image" content="./icons/icon-512.png">
    <meta property="og:url" content=".">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="./icons/icon-512.png">

    <link rel="apple-touch-icon" sizes="192x192" href="./icons/icon-192.png">
    <link rel="apple-touch-icon" sizes="512x512" href="./icons/icon-512.png">
    <link rel="icon" type="image/png" href="./icons/icon-192.png">
    <!--
      NOTE: When deploying to GitHub Pages, all asset paths (manifest, icons, service worker)
      must be relative to the repo root. This ensures correct loading when the site is
      served from a subdirectory.
    -->
</head>
<body>
    <header class="d-flex align-items-center py-2 px-3 bg-transparent">
        <div class="flex-grow-1"></div> <!-- Left spacer -->
        <h1 class="h4 mb-0">PM Certification Quiz</h1> <!-- Centered title -->
        <div class="flex-grow-1 d-flex"> <!-- Right spacer with button -->
            <button id="themeToggleBtn" class="btn ms-auto" aria-pressed="false" aria-label="Toggle day/night mode">
                <span id="themeToggleIcon" aria-hidden="true">
                    <i id="iconSun" class="bi bi-sun"></i>
                    <i id="iconMoon" class="bi bi-moon"></i>
                </span>
            </button>
        </div>
    </header>
    <main class="container py-4 quiz-container" role="main">
        <section id="uploadSection" class="card p-4 mb-4 fade-in" tabindex="-1">
            <h2 class="mb-4 text-center">Load Quiz Questions</h2>

            <form id="selectBankForm" class="mb-3">
                <div class="mb-3">
                    <label for="questionBankSelect" class="form-label">Option 1: Select Question Bank</label>
                    <select id="questionBankSelect" class="form-select" aria-describedby="selectHelp">
                        </select>
                    <div id="selectHelp" class="form-text">Choose a predefined question bank.</div>
                </div>
                <button type="submit" id="startFromSelectBtn" class="btn btn-success w-100">Start Quiz from Selection</button>
            </form>

            <div class="divider-text">OR</div>
            
            <form id="uploadForm" class="mb-3">
                <div class="mb-3">
                    <label for="jsonFile" class="form-label">Option 2: Upload JSON File</label>
                    <input type="file" id="jsonFile" class="form-control" accept=".json" aria-describedby="fileHelp">
                    <div id="fileHelp" class="form-text">Select a quiz file in JSON format from your device.</div>
                </div>
                <button type="submit" id="startFromFileBtn" class="btn btn-primary w-100">Start Quiz from File</button>
            </form>

            <div id="jsonLoadError" class="text-danger mt-3" role="alert" aria-live="assertive"></div>
            <div id="loadingIndicator" class="d-none text-center mt-3" role="status">
                <div class="loading-spinner" aria-hidden="true"></div>
                <p>Loading quiz...</p>
            </div>
        </section>

        <section id="quizInterface" class="d-none fade-in" aria-labelledby="quizTopic" tabindex="-1">
            <div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3">
                <h3 id="quizTopic" class="mb-0 h4"></h3>
                <div class="score-display" aria-live="polite">
                    <div class="d-flex justify-content-between">
                        <span class="progress-label">Score:</span>
                        <span>
                            <strong id="currentScoreValue">0</strong>/<span id="totalQuestions">0</span>
                            (<strong id="currentScorePercentage">0</strong>%)
                        </span>
                    </div>
                </div>
            </div>
            
            <div class="progress-container" aria-label="Quiz Progress">
                <div class="flex-grow-1">
                    <div class="progress mb-1 progress-sm">
                        <div id="progressBar" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                             <span class="visually-hidden">Quiz progress</span>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between">
                        <small id="questionProgressText">Question <span id="currentQuestionNum">0</span> of <span id="totalQuestionsDisplay">0</span></small>
                        <small id="timer" class="text-muted" role="timer">Time left: 0s</small>
                    </div>
                </div>
            </div>
            
            <div id="questionContainer" class="card p-4 mb-4" aria-live="polite" aria-atomic="true">
                </div>
            <div id="explanationContainer" class="explanation-box d-none" aria-live="polite" aria-atomic="true">
                </div>

            <button id="finishQuizBtn" class="btn btn-info w-100 mt-4">Finish Quiz & See Results</button>
            <button id="resetQuizDuringQuizBtn" class="btn btn-danger w-100 mt-2">Reset Quiz & Load New</button>

        </section>

        <section id="resultsSection" class="d-none card p-4 fade-in" aria-labelledby="resultsHeading" tabindex="-1">
            <h2 id="resultsHeading" class="mb-4 text-center">Quiz Results</h2>
            <div class="mb-4" aria-live="polite">
                <div class="d-flex justify-content-between mb-2">
                    <h4 class="mb-0 h5">Final Score:</h4>
                    <h4 class="mb-0 h5">
                        <strong id="finalScoreValue">0</strong>/<span id="finalTotalQuestions">0</span>
                        (<strong id="finalScorePercentage">0</strong>%)
                    </h4>
                </div>
                <div class="progress mt-3 position-relative progress-lg" aria-label="Final score percentage">
                    <div id="finalPercentageBar" class="progress-bar" role="progressbar"></div>
                    <div id="finalPercentageText" class="position-absolute w-100 h-100 d-flex justify-content-center align-items-center">0%</div>
                </div>
            </div>
            <button id="reviewBtn" class="btn btn-info mb-3 w-100">Review Answers</button>
            <button id="restartQuizBtnResults" class="btn btn-primary w-100">Take New Quiz</button> </section>

        <section id="reviewSection" class="d-none card p-4 fade-in" aria-labelledby="reviewHeading" tabindex="-1">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 id="reviewHeading" class="mb-0 h3">Answer Review</h2>
                <div class="score-display">
                    <div class="d-flex justify-content-between">
                        <span class="progress-label">Final Score:</span>
                        <span>
                            <strong id="reviewScoreValue">0</strong>/<span id="reviewTotalQuestions">0</span>
                            (<strong id="reviewScorePercentage">0</strong>%)
                        </span>
                    </div>
                </div>
            </div>
            <div id="reviewQuestionsContainer" aria-live="polite">
                </div>
            <button id="restartQuizBtnReview" class="btn btn-primary mt-4 w-100">Take New Quiz</button> </section>
    </main>

    <footer class="text-center mt-4 mb-4 text-muted small">v1.3.31</footer>

    <script src="app.js"></script>
</body>
</html>
